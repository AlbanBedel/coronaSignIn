<!DOCTYPE html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/main.css') }}">
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {#
    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />

    <link rel="manifest" href="site.webmanifest" />
    <link rel="apple-touch-icon" href="icon.png" />
    <!-- Place favicon.ico in the root directory -->

    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/main.css" />

    <meta name="theme-color" content="#fafafa" />
    #}
  </head>

  <body>
  <div class="contact-form-container">
    <h2>Moin lieber Gast!</h2>
    <span class="description">
      Aktuell sind wir zum Zweck der Nachverfolgung von Infektionsketten
      verpflichtet folgende Kontaktdaten unserer GÃ¤ste unter Angabe des
      Datums zu erfassen:
    </span>
    <form method=POST action>
        {{ form.csrf_token }}
        {{ form.first_name.label }} {{ form.first_name }}
        {{ form.last_name.label }} {{ form.last_name }}
        {{ form.contact_data.label }} {{ form.contact_data }}
        <input type="submit" value="Jetzt einchecken">
    </form>
    </div>
    {#
    <script src="js/vendor/modernizr-3.11.2.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
    #}
    <script>
      window.onload = function() {
        const storedData = JSON.parse(window.localStorage.getItem('saved-form'));
        if (storedData !== null && typeof storedData === 'object') {
          if (storedData.first_name) {
            document.getElementById("first_name").value = storedData.first_name;
          }
          if (storedData.last_name) {
            document.getElementById("last_name").value = storedData.last_name;
          }
          if (storedData.contact_data) {
            document.getElementById("contact_data").value = storedData.contact_data;
          }
        }

        document.getElementsByTagName('form')[0].addEventListener('submit', function() {
          window.localStorage.setItem('saved-form', JSON.stringify({
            first_name: document.getElementById("first_name").value,
            last_name: document.getElementById("last_name").value,
            contact_data: document.getElementById("contact_data").value,
          }))
        })

      }
    </script>
  </body>
</html>
